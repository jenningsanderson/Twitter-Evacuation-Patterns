<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Object - RDoc Documentation</title>

<link href="./fonts.css" rel="stylesheet">
<link href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/navigation.js"></script>
<script src="./js/search_index.js"></script>
<script src="./js/search.js"></script>
<script src="./js/searcher.js"></script>
<script src="./js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">BasicObject
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-build_active_time_bins">#build_active_time_bins</a>
    
    <li ><a href="#method-i-calculate_density">#calculate_density</a>
    
    <li ><a href="#method-i-find_median_point">#find_median_point</a>
    
    <li ><a href="#method-i-get_k_means_clusters">#get_k_means_clusters</a>
    
    <li ><a href="#method-i-get_most_dense_cluster">#get_most_dense_cluster</a>
    
    <li ><a href="#method-i-kmeans">#kmeans</a>
    
    <li ><a href="#method-i-score_temporal_patterns">#score_temporal_patterns</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Object">
  <h1 id="class-Object" class="class">
    class Object
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="GEOFACTORY">GEOFACTORY
        
        <dd><p>This is strictly for processing.  These methods should not make outside
calls to models/classes</p>
        
      
        <dt id="INFINITY">INFINITY
        
        <dd><p>K-Means Clustering</p>

<p>Allows Tweets to be used as points for x-iterations of k clusters.</p>

<p>Adapted from: <a
href="https://gist.github.com/cfdrake/995804">gist.github.com/cfdrake/995804</a></p>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-build_active_time_bins" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">build_active_time_bins</span><span
            class="method-args">(tweets, dates)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Given an array of <a href="Tweet.html">Tweet</a> objects and a list of
dates, this function</p>

<pre>returns an array of size dates.length-1 which are binned groups of the tweets
in which the tweets in each bin were the tweets that occured in the most active
1/8th of the days.

The tweets returned should not be solely considered for analysis, but rather used
in conjunction with a median or average location finding function to determine
the user&#39;s general geographic activity.</pre>
          
          

          
          <div class="method-source-code" id="build_active_time_bins-source">
            <pre><span class="ruby-comment"># File processing/geoprocessing.rb, line 48</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">build_active_time_bins</span>(<span class="ruby-identifier">tweets</span>, <span class="ruby-identifier">dates</span>)

        <span class="ruby-comment">#Pull out the times of each tweet.</span>
        <span class="ruby-identifier">times</span> = <span class="ruby-identifier">tweets</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">tweet</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tweet</span>[<span class="ruby-string">&quot;date&quot;</span>]}

        <span class="ruby-comment">#Find the most active part of this user&#39;s daily activity</span>
        <span class="ruby-identifier">hours_of_day</span> = [<span class="ruby-value">0</span>]<span class="ruby-operator">*</span><span class="ruby-value">8</span>
        <span class="ruby-identifier">times</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">time</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">hours_of_day</span>[<span class="ruby-identifier">time</span>.<span class="ruby-identifier">hour</span> <span class="ruby-operator">/</span> <span class="ruby-value">3</span>] <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">most_active_hours</span> = <span class="ruby-identifier">hours_of_day</span>.<span class="ruby-identifier">index</span> <span class="ruby-identifier">hours_of_day</span>.<span class="ruby-identifier">max</span>

        <span class="ruby-comment">#Get the tweets that occured in that chunk of time</span>
        <span class="ruby-identifier">pert_tweets</span> = <span class="ruby-identifier">tweets</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">tweet</span><span class="ruby-operator">|</span> ( <span class="ruby-identifier">tweet</span>[<span class="ruby-string">&quot;date&quot;</span>].<span class="ruby-identifier">hour</span> <span class="ruby-operator">/</span> <span class="ruby-value">3</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">most_active_hours</span>}

        <span class="ruby-identifier">binned_tweets</span> = []

        <span class="ruby-comment">#Now separate the tweets into bins:</span>
        (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">dates</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">-</span><span class="ruby-value">2</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">binned_tweets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">pert_tweets</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">tweet</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tweet</span>[<span class="ruby-string">&quot;date&quot;</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">dates</span>[<span class="ruby-identifier">index</span>] <span class="ruby-keyword">and</span> <span class="ruby-identifier">tweet</span>[<span class="ruby-string">&quot;date&quot;</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">dates</span>[<span class="ruby-identifier">index</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>]}
                <span class="ruby-comment">#pert_tweets.delete_if{ |tweet| tweet[&quot;date&quot;] &gt; dates[index] and tweet[&quot;date&quot;] &lt; dates[index+1] }</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">binned_tweets</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-calculate_density" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">calculate_density</span><span
            class="method-args">(tweets)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Density is defined as 2^(number of tweets) / (area of the tweets)</p>

<pre>This is an exponential function because it needed more weight on the number of tweets</pre>
          
          

          
          <div class="method-source-code" id="calculate_density-source">
            <pre><span class="ruby-comment"># File processing/geoprocessing.rb, line 103</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_density</span>(<span class="ruby-identifier">tweets</span>)
        <span class="ruby-identifier">num_tweets</span> = <span class="ruby-identifier">tweets</span>.<span class="ruby-identifier">length</span>
        <span class="ruby-identifier">multi_points</span> = <span class="ruby-constant">GEOFACTORY</span>.<span class="ruby-identifier">multi_point</span>(<span class="ruby-identifier">tweets</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">tweet</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tweet</span>.<span class="ruby-identifier">point</span>})
        <span class="ruby-identifier">hull</span> = <span class="ruby-identifier">multi_points</span>.<span class="ruby-identifier">convex_hull</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">hull</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:area</span>
                <span class="ruby-comment">#It is important to really weight the number of tweets here.</span>
                <span class="ruby-identifier">density</span> = <span class="ruby-value">2</span><span class="ruby-operator">**</span><span class="ruby-identifier">num_tweets</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">hull</span>.<span class="ruby-identifier">area</span>)
        <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">density</span> = <span class="ruby-value">0.01</span> <span class="ruby-comment">#If no density can be determined, keep it low</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">density</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-find_median_point" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_median_point</span><span
            class="method-args">(points_array)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Algorithm adopted from Andrew Hardin&#39;s C# function.</p>

<pre>Given an array of points, this function will sort the x,y coordinates and
return the median point.  This seems to work better than an averaging
function because the median point will not geographically consider far outlying
points.</pre>
          
          

          
          <div class="method-source-code" id="find_median_point-source">
            <pre><span class="ruby-comment"># File processing/geoprocessing.rb, line 21</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_median_point</span>(<span class="ruby-identifier">points_array</span>)
        <span class="ruby-identifier">x</span> = []
        <span class="ruby-identifier">y</span> = []
        <span class="ruby-identifier">points_array</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">point</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">point</span>[<span class="ruby-value">0</span>]
                <span class="ruby-identifier">y</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">point</span>[<span class="ruby-value">1</span>]
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">x</span>.<span class="ruby-identifier">sort!</span>
        <span class="ruby-identifier">y</span>.<span class="ruby-identifier">sort!</span>
        <span class="ruby-keyword">if</span> (<span class="ruby-identifier">points_array</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span>).<span class="ruby-identifier">zero?</span>
                <span class="ruby-identifier">mid</span> = <span class="ruby-identifier">x</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">/</span><span class="ruby-value">2</span>
                <span class="ruby-keyword">return</span> [ (<span class="ruby-identifier">x</span>[<span class="ruby-identifier">mid</span>]<span class="ruby-operator">+</span><span class="ruby-identifier">x</span>[<span class="ruby-identifier">mid</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]) <span class="ruby-operator">/</span><span class="ruby-value">2.0</span>, (<span class="ruby-identifier">y</span>[<span class="ruby-identifier">mid</span>]<span class="ruby-operator">+</span><span class="ruby-identifier">y</span>[<span class="ruby-identifier">mid</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>])<span class="ruby-operator">/</span><span class="ruby-value">2.0</span>]
        <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">mid</span> = <span class="ruby-identifier">x</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">/</span><span class="ruby-value">2</span>
                <span class="ruby-keyword">return</span> [<span class="ruby-identifier">x</span>[<span class="ruby-identifier">mid</span>],<span class="ruby-identifier">y</span>[<span class="ruby-identifier">mid</span>]]
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_k_means_clusters" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_k_means_clusters</span><span
            class="method-args">(tweets, centers=5, iterations=10)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get clusters via k-means clustering from an array of Tweets</p>
          
          

          
          <div class="method-source-code" id="get_k_means_clusters-source">
            <pre><span class="ruby-comment"># File processing/geoprocessing.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_k_means_clusters</span>(<span class="ruby-identifier">tweets</span>, <span class="ruby-identifier">centers</span>=<span class="ruby-value">5</span>, <span class="ruby-identifier">iterations</span>=<span class="ruby-value">10</span>)

        <span class="ruby-comment">#Make the point object of the tweet real</span>
        <span class="ruby-identifier">tweets</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tweet</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">tweet</span>.<span class="ruby-identifier">as_point</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-comment">#Run the k_means algorithm</span>
        <span class="ruby-identifier">kmeans</span>(<span class="ruby-identifier">tweets</span>, <span class="ruby-identifier">centers</span>, <span class="ruby-identifier">iterations</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">cluster</span><span class="ruby-operator">|</span> <span class="ruby-identifier">cluster</span>.<span class="ruby-identifier">tweets</span>}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_most_dense_cluster" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_most_dense_cluster</span><span
            class="method-args">(tweet_clusters)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Find the densest cluster from a cluster of tweets, this could be a home?</p>

<pre>--&gt; Should check the timing of this.</pre>
          
          

          
          <div class="method-source-code" id="get_most_dense_cluster-source">
            <pre><span class="ruby-comment"># File processing/geoprocessing.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_most_dense_cluster</span>(<span class="ruby-identifier">tweet_clusters</span>)
        <span class="ruby-comment"># puts &quot;Length: #{tweet_clusters.length}&quot;</span>
        <span class="ruby-identifier">most_dense</span> = <span class="ruby-identifier">tweet_clusters</span>[<span class="ruby-value">0</span>]
        <span class="ruby-identifier">max_density</span> = <span class="ruby-value">0.0</span>

        <span class="ruby-identifier">tweet_clusters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tweet_cluster</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">density</span> = <span class="ruby-identifier">calculate_density</span>(<span class="ruby-identifier">tweet_cluster</span>)

                <span class="ruby-comment">#Divide this number by the spread...</span>
                <span class="ruby-identifier">density</span> <span class="ruby-operator">/=</span> <span class="ruby-identifier">score_temporal_patterns</span>(<span class="ruby-identifier">tweet_cluster</span>)

                <span class="ruby-keyword">if</span> <span class="ruby-identifier">density</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">max_density</span>
                        <span class="ruby-identifier">max_density</span> = <span class="ruby-identifier">density</span>
                        <span class="ruby-identifier">most_dense</span> = <span class="ruby-identifier">tweet_cluster</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">most_dense</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-kmeans" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">kmeans</span><span
            class="method-args">(tweets, k, iterations=10)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>kmeans algorithm</p>
          
          

          
          <div class="method-source-code" id="kmeans-source">
            <pre><span class="ruby-comment"># File processing/k-means.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">kmeans</span>(<span class="ruby-identifier">tweets</span>, <span class="ruby-identifier">k</span>, <span class="ruby-identifier">iterations</span>=<span class="ruby-value">10</span>)

  <span class="ruby-identifier">clusters</span> = <span class="ruby-identifier">tweets</span>.<span class="ruby-identifier">sample</span>(<span class="ruby-identifier">k</span>).<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">tweet</span><span class="ruby-operator">|</span> <span class="ruby-constant">Cluster</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tweet</span>)}

  <span class="ruby-identifier">iterations</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># Assign points to clusters</span>
    <span class="ruby-identifier">tweets</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tweet</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">min_dist</span> = <span class="ruby-operator">+</span><span class="ruby-constant">INFINITY</span>
      <span class="ruby-identifier">min_cluster</span> = <span class="ruby-keyword">nil</span>

      <span class="ruby-comment"># Find the closest cluster</span>
      <span class="ruby-identifier">clusters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cluster</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">dist</span> = <span class="ruby-identifier">tweet</span>.<span class="ruby-identifier">point</span>.<span class="ruby-identifier">distance</span>(<span class="ruby-identifier">cluster</span>.<span class="ruby-identifier">center</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">dist</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">min_dist</span>
          <span class="ruby-identifier">min_dist</span> = <span class="ruby-identifier">dist</span>
          <span class="ruby-identifier">min_cluster</span> = <span class="ruby-identifier">cluster</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Add to closest cluster</span>
      <span class="ruby-identifier">min_cluster</span>.<span class="ruby-identifier">tweets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tweet</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">clusters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cluster</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">cluster</span>.<span class="ruby-identifier">recenter!</span>
    <span class="ruby-keyword">end</span>

                <span class="ruby-keyword">if</span> <span class="ruby-identifier">index</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">iterations</span><span class="ruby-operator">-</span><span class="ruby-value">2</span>
            <span class="ruby-comment"># Reset points for the next iteration</span>
            <span class="ruby-identifier">clusters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cluster</span><span class="ruby-operator">|</span>
              <span class="ruby-identifier">cluster</span>.<span class="ruby-identifier">tweets</span> = []
            <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">to_return</span> = []
        <span class="ruby-identifier">clusters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cluster</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">to_return</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cluster</span>.<span class="ruby-identifier">tweets</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">to_return</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-score_temporal_patterns" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">score_temporal_patterns</span><span
            class="method-args">(tweets)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="score_temporal_patterns-source">
            <pre><span class="ruby-comment"># File processing/geoprocessing.rb, line 73</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">score_temporal_patterns</span>(<span class="ruby-identifier">tweets</span>)
        <span class="ruby-identifier">times</span> = <span class="ruby-identifier">tweets</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">tweet</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tweet</span>[<span class="ruby-string">&quot;date&quot;</span>]}

        <span class="ruby-identifier">blocks</span> = []

        <span class="ruby-identifier">times</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">time</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">blocks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">time</span>.<span class="ruby-identifier">hour</span><span class="ruby-operator">/</span><span class="ruby-value">3</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">blocks</span>.<span class="ruby-identifier">group_by</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">value</span>}.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment"># =&gt; Essentially a measure of deviation</span>

<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

